#---------------------------------------------------------
# langgraph를 이용한 Chatbot 구현
#---------------------------------------------------------
# .env 파일에서 환경 변수를 읽어옵니다.









# streamlit_chat 라이브러리


# LLM 초기화


# ---------------------------------------------------------------------------------
# 페이지 설정
# ---------------------------------------------------------------------------------
# 웹 애플리케이션의 페이지 제목과 아이콘을 설정


# 페이지 제목을 중앙에 정렬하여 표시
# - unsafe_allow_html=True: HTML을 직접 사용할 수 있도록 허용


# ---------------------------------------------------------------------------------
# 사이드바 버튼 설정
# ---------------------------------------------------------------------------------




# ---------------------------------------------------------------------------------
# LangGraph 앱과 MemorySaver 초기화 (최초 1회만)
# ---------------------------------------------------------------------------------

    
    # 1) LangGraph의 워크플로우(StateGraph) 정의


    # 2) 모델 호출 함수 정의
    def call_model(state: MessagesState):

        # 모델의 응답을 메시지 리스트에 추가


    # 3) 노드 및 엣지 연결



    # 4) MemorySaver를 사용해 대화 상태를 메모리에 저장/불러오기


    # 5) LangGraph 앱 컴파일


    # 6) 대화 이력을 저장할 메시지 리스트 초기화




# ---------------------------------------------------------------------------------
# 사이드바 버튼 동작 정의
# ---------------------------------------------------------------------------------
# 1) "대화 내용 초기화" 버튼: 대화 기록 리셋





# 2) "대화 내용 요약" 버튼: LLM에게 요약을 요청해 결과를 사이드바에 표시

    
    # 2-1) 메시지들을 텍스트로 합치기











        


    # 2-2) 요약 프롬프트 만들기






    # 2-3) LLM에게 요약 요청



    # 2-4) 사이드바에 요약 결과 표시



# ---------------------------------------------------------------------------------
# 메인 영역: 입력 폼 및 모델 호출
# clear_on_submit=True : 폼이 제출될 때 입력 필드 자동 초기화
# ---------------------------------------------------------------------------------





        # 사용자 입력을 HumanMessage 로 추가

        
        # LangGraph 앱을 호출해 AI 응답 생성




        
        # 새롭게 생성된 AI 응답



# ---------------------------------------------------------------------------------
# "마지막 AIMessage" 폼 바로 아래에 표시
# ---------------------------------------------------------------------------------
# - 대화 이력이 비어있지 않고, 마지막 메시지가 AIMessage이면 표시





# ---------------------------------------------------------------------------------
# 그 외의 대화 이력(마지막 메시지 제외)을 아래에서 순서대로 표시
# is_user=True : 사용자가 입력한 메세지
# ---------------------------------------------------------------------------------






